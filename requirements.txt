# requirements.txt
flask==2.3.3
flask-cors==4.0.0
boto3==1.34.44
requests==2.31.0
pillow==10.0.1
gunicorn==21.2.0
python-dotenv==1.0.0

# .env (서버에서 생성할 파일)
GEMINI_API_KEY=AIzaSyAbF6-puUPZqx7vpDvb_XNrDj3-a_e0ja4
AWS_ACCESS_KEY=AKIAQXUIYAFFQ2RRHFNH
AWS_SECRET_KEY=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

# run.sh
#!/bin/bash
echo "Gemini Image Editing Server 시작..."

# 가상환경 활성화
source venv/bin/activate

# 서버 실행
python3 app.py

# install.sh  
#!/bin/bash
echo "필요한 패키지 설치 중..."

# Python 가상환경 생성
python3 -m venv venv
source venv/bin/activate

# 라이브러리 설치
pip install -r requirements.txt

# .env 파일 생성 (보안상 GitHub에는 올리지 않음)
cat > .env << 'EOF'
GEMINI_API_KEY=AIzaSyAbF6-puUPZqx7vpDvb_XNrDj3-a_e0ja4
AWS_ACCESS_KEY=AKIAQXUIYAFFQ2RRHFNH
AWS_SECRET_KEY=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
EOF

echo "설치 완료!"

# README.md
# Gemini 2.5 Flash Image Editing Server

헤어스타일을 유지하면서 얼굴/옷/배경을 변경하는 AI 이미지 편집 서버

## 기능
- 얼굴만 변경 (헤어스타일 유지)
- 얼굴 + 옷 변경 (헤어스타일 유지) 
- 얼굴 + 옷 + 배경 변경 (헤어스타일만 유지)

## 설치 및 실행
```bash
git clone https://github.com/kimminjae413/gemini-image-editor.git
cd gemini-image-editor
chmod +x install.sh run.sh
./install.sh
./run.sh
```

## API 엔드포인트

### POST /api/edit-image
이미지 편집 요청
```json
{
  "image": "base64_encoded_image",
  "edit_option": "face_only|face_clothes|face_clothes_background", 
  "style_description": "young professional look with gentle smile",
  "user_id": "test_user"
}
```

### GET /api/status/{task_id}
작업 상태 확인

### GET /health
서버 상태 확인

## 서버 정보
- 포트: 5003
- S3 버킷: photo-to-video
- 처리 시간: 30-60초
